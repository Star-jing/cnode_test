(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-41d760a8"],{3213:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"topic"},[n("panel",{scopedSlots:t._u([{key:"header",fn:function(){return[n("h3",[t._v(t._s(t.topic.title))])]},proxy:!0},{key:"content",fn:function(){return[n("div",{domProps:{innerHTML:t._s(t.topic.content)}})]},proxy:!0}])}),n("panel",{scopedSlots:t._u([{key:"header",fn:function(){return[n("span",[t._v("评论")])]},proxy:!0},{key:"content",fn:function(){return[n("div",t._l(t.topic.replies,(function(e){return n("div",{key:e.id},[n("img",{attrs:{src:e.author.avatar_url,alt:""}}),n("span",[t._v(t._s(e.author.loginname))]),n("span",{domProps:{innerHTML:t._s(e.content)}}),n("div",[n("button",{class:{"up-active":e.is_uped},on:{click:function(n){return t.upClick(e.id)}}},[t._v(" 点赞"+t._s(e.ups.length)+" ")]),t.isLogin?n("button",[t._v("回复")]):t._e()]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.id===t.reply_id,expression:"comment.id === reply_id"}]},[n("textarea",{attrs:{name:""}})]),n("hr")])})),0),n("br"),n("br"),n("div",[n("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.text,expression:"text",modifiers:{trim:!0}}],domProps:{value:t.text},on:{input:function(e){e.target.composing||(t.text=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),n("button",{on:{click:t.submit}},[t._v("回复")])])]},proxy:!0}])})],1)},i=[],o=n("1da1"),c=(n("7db0"),n("96cf"),n("89d7")),a={name:"Topic",components:{Panel:c["a"]},data:function(){return{topic:[],text:"",reply_id:"",reply_text:""}},computed:{isLogin:function(){return!0}},created:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,r,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.$route.params.topicId,r=!0,i=r?"/topic/".concat(n,"?aceesstoken= 3bddeae3-4079-4bdf-b6c1-4281e95bc34a"):"/topic/".concat(n),e.next=5,t.$axios.get(i);case 5:o=e.sent,t.topic=o.data,console.log(t.topic);case 8:case"end":return e.stop()}}),e)})))()},methods:{getTopic:function(){},upClick:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var r,i,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=3,e.$axios.post("/reply/".concat(t,"/ups"),{accesstoken:"3bddeae3-4079-4bdf-b6c1-4281e95bc34a"});case 3:r=n.sent,console.log(r),i="515005e9604b3d512109bb17",o=e.topic.replies.find((function(e){return e.id===t})),o.is_uped="up"===r.action,"up"===r.action?o.ups.push(i):o.ups.pop();case 9:case"end":return n.stop()}}),n)})))()},submit:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.text,!n){e.next=8;break}return e.next=4,t.$axios.post("/topic/".concat(t.topic.id,"/replies"),{accesstoken:"3bddeae3-4079-4bdf-b6c1-4281e95bc34a",content:n});case 4:r=e.sent,i={id:r.reply_id,is_uped:!1,ups:[],content:"<p>".concat(n,"</p>"),author:{avatar_url:"https://avatars.githubusercontent.com/u/79734762?v=4&s=120",loginname:"Star-jing"}},t.topic.replies.push(i),t.text="";case 8:case"end":return e.stop()}}),e)})))()}}},s=a,u=(n("a092"),n("2877")),p=Object(u["a"])(s,r,i,!1,null,null,null);e["default"]=p.exports},"7b61":function(t,e,n){},"7db0":function(t,e,n){"use strict";var r=n("23e7"),i=n("b727").find,o=n("44d2"),c="find",a=!0;c in[]&&Array(1)[c]((function(){a=!1})),r({target:"Array",proto:!0,forced:a},{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),o(c)},a092:function(t,e,n){"use strict";n("7b61")}}]);
//# sourceMappingURL=chunk-41d760a8.158461f4.js.map